<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Transaction List</title>
  <style>
    .delete-btn {
      color: red;
      cursor: pointer;
    }
  </style>
</head>
<body>

  <h2>Transactions</h2>
  <ul id="transaction-list">
    <li>
      Coffee - $3.50
      <button class="delete-btn" data-id="1">Delete</button>
    </li>
    <li>
      Groceries - $25.00
      <button class="delete-btn" data-id="2">Delete</button>
    </li>
  </ul>

  <script>
    // Simulated function to refresh transaction list
    function fetchTransactions() {
      alert("Fetching updated transactions... (simulate refresh)");
    }

    const transactionList = document.getElementById("transaction-list");

    if (transactionList) {
      transactionList.addEventListener("click", async (e) => {
        if (e.target && e.target.classList.contains("delete-btn")) {
          const transactionId = e.target.getAttribute("data-id");

          const isConfirmed = confirm("Are you sure you want to delete this transaction?\nThis action cannot be undone.");
          if (!isConfirmed) return;

          try {
            // Simulated API call to delete the transaction
            const response = await fetch("api.php", {
              method: "DELETE",
              headers: {
                "Content-Type": "application/json"
              },
              body: JSON.stringify({ id: transactionId })
            });

            const data = await response.json();

            if (data.message) {
              alert("Transaction deleted successfully!");
              fetchTransactions(); // Refresh list
            } else {
              alert(data.error || "Failed to delete transaction");
            }
          } catch (err) {
            console.error("Error deleting transaction:", err);
            alert("An error occurred while deleting the transaction");
          }
        }
      });
    }
  </script>

</body>
</html>
